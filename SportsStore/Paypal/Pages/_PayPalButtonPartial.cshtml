
<div id="paypal-button-container" style="width: 200px; margin: auto;"></div>

<!-- PayPal SDK -->
<script src="https://www.paypal.com/sdk/js?client-id=test"></script>   


<script type="text/javascript">

    // Adapted from https://developer.paypal.com/demo/checkout/#/pattern/server
    paypal.Buttons({

        // Call the server to set up the transaction
        createOrder: function (data, actions) {
            
            
            orderID = data.orderID; // in case user cancels order

            return fetch('/paypal/create-paypal-transaction', {
                    method: 'post'
                })

                .then(function (res) {
                    return res.json();
                })

                .then(function (data) {

                    return data.orderID;
                });
        },

        onApprove: function (data, actions) {
            console.log("data id = " + data.orderID);
            return fetch('/paypal/capture-paypal-transaction/' + data.orderID, {
                method: 'POST'
            });
        },

        onCancel: function (data, actions) {
            window.location.replace('http://localhost:5000/Checkout/PaymentCancelled/');
        },

        onError: function (data, actions) {
            window.location.replace('http://localhost:5000/Checkout/PaymentFailed/');
        },

        style: {
            layout: 'vertical',
            color: 'gold',
            shape: 'rect',
            label: 'paypal'
        }
    }).render('#paypal-button-container');

</script>
